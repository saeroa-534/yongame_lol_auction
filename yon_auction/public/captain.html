<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>íŒ€ì¥ - ì—°ë‚³ëŒ€ ì‹œì¦Œ6 ê²½ë§¤</title>
  <link rel="stylesheet" href="/css/style.css">
  <style>
    /* íŒ€ì¥ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ - 16:9 ìµœì í™” */
    html, body {
      height: 100%;
      overflow: hidden;
    }
    
    .container {
      height: calc(100vh - 60px);
      padding: 10px 20px;
      display: flex;
      flex-direction: column;
    }
    
    .captain-main {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      flex: 1;
      min-height: 0;
    }
    
    /* ì™¼ìª½: ê²½ë§¤ ì„¹ì…˜ */
    .auction-section {
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-height: 0;
    }
    
    .my-team-card {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      padding: 12px 20px;
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .my-team-name {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--white);
    }
    
    .my-team-points {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--warning);
    }
    
    /* í˜„ì¬ ê²½ë§¤ ì˜ì—­ */
    .current-auction-card {
      display: flex;
      flex-direction: column;
      padding: 15px;
      min-height: 0;
    }
    
    /* ì„ ìˆ˜ ì •ë³´ + ê²½ë§¤ ì§„í–‰ ë³‘ë ¬ ë°°ì¹˜ */
    .player-auction-row {
      display: flex;
      gap: 20px;
      flex: 1;
      min-height: 0;
    }
    
    .player-info-section {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    
    .auction-status-section {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    
    .player-image {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid var(--primary);
      margin-bottom: 8px;
    }
    
    .player-name {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 3px;
    }
    
    .player-tier {
      font-size: 0.85rem;
      color: var(--warning);
      margin-bottom: 5px;
    }
    
    .player-bio {
      font-size: 0.8rem;
      color: #B9BBBE;
      max-width: 250px;
      line-height: 1.3;
      word-break: keep-all;
    }
    
    .timer {
      font-size: 3.5rem;
      font-weight: 700;
      margin: 5px 0;
    }
    
    .current-bid {
      font-size: 2rem;
      font-weight: 700;
      color: var(--warning);
    }
    
    /* ì…ì°° íŒ¨ë„ - ì„ ìˆ˜ ì •ë³´ ì•„ë˜ */
    .bid-panel {
      padding: 12px;
    }
    
    .bid-quick-buttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
      margin-bottom: 10px;
    }
    
    .bid-quick-buttons .btn {
      font-size: 1rem;
      padding: 12px;
    }
    
    .custom-bid {
      display: flex;
      gap: 8px;
    }
    
    .custom-bid input {
      flex: 1;
    }
    
    .custom-bid .btn {
      padding: 12px 20px;
    }
    
    /* ì˜¤ë¥¸ìª½: ì •ë³´ ì„¹ì…˜ */
    .info-section {
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-height: 0;
      overflow: hidden;
    }
    
    /* íŒ€ í˜„í™© - ê°€ë¡œ ë°°ì¹˜ */
    .teams-horizontal {
      display: flex;
      gap: 8px;
      flex-wrap: nowrap;
      overflow-x: auto;
      padding: 5px 0;
    }
    
    .team-chip {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 8px 12px;
      background: var(--darker);
      border-radius: 8px;
      min-width: 80px;
      flex-shrink: 0;
      box-sizing: border-box;
    }
    
    .team-chip.my-team {
      background: var(--primary);
    }
    
    .team-chip.current-bidder {
      outline: 3px solid var(--warning);
      outline-offset: -3px;
    }
    
    .team-chip-name {
      font-weight: 700;
      font-size: 0.85rem;
      color: var(--white);
    }
    
    .team-chip-points {
      font-size: 0.75rem;
      color: var(--warning);
    }
    
    /* ì „ì²´ íŒ€ ë¡œìŠ¤í„° - í”„ë¡œí•„ ì‚¬ì§„ í™œìš© */
    .all-rosters-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      flex: 1;
      overflow-y: auto;
      min-height: 0;
    }
    
    .team-roster-card {
      background: var(--darker);
      border-radius: 8px;
      padding: 10px;
    }
    
    .team-roster-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      padding-bottom: 5px;
      border-bottom: 1px solid #40444B;
    }
    
    .roster-slots {
      display: flex;
      gap: 4px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .roster-slot-mini {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 50px;
    }
    
    .roster-slot-mini img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #40444B;
      background: var(--dark);
    }
    
    .roster-slot-mini.filled img {
      border-color: var(--secondary);
    }
    
    .roster-slot-mini.empty img {
      opacity: 0.3;
    }
    
    .roster-slot-mini .slot-label {
      font-size: 0.6rem;
      color: #72767D;
      margin-top: 2px;
    }
    
    .roster-slot-mini .player-name-mini {
      font-size: 0.65rem;
      color: var(--white);
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 50px;
    }
    
    /* ìµœê·¼ ë‚™ì°° ê²°ê³¼ */
    .recent-results {
      max-height: 120px;
      overflow-y: auto;
    }
    
    .result-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 8px;
      background: var(--darker);
      border-radius: 6px;
      margin-bottom: 5px;
      font-size: 0.85rem;
    }
    
    .result-item.unsold {
      background: rgba(237, 66, 69, 0.2);
      border-left: 3px solid var(--danger);
    }
    
    /* ì…ì°° ê°€ëŠ¥ ì—¬ë¶€ í‘œì‹œ - ì œê±° (í† ìŠ¤íŠ¸ë¡œ ëŒ€ì²´) */
    .can-bid-indicator {
      display: none;
    }
    
    /* í† ìŠ¤íŠ¸ ì•Œë¦¼ */
    .toast-container {
      position: fixed;
      top: 70px;
      right: 20px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 10px;
      pointer-events: none;
    }
    
    .toast {
      background: rgba(35, 39, 42, 0.95);
      backdrop-filter: blur(10px);
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      pointer-events: auto;
      animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s;
      max-width: 300px;
    }
    
    .toast.success {
      border-left: 4px solid var(--secondary);
    }
    
    .toast.error {
      border-left: 4px solid var(--danger);
    }
    
    .toast.info {
      border-left: 4px solid var(--primary);
    }
    
    .toast.warning {
      border-left: 4px solid var(--warning);
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(100%);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes fadeOut {
      from {
        opacity: 1;
      }
      to {
        opacity: 0;
      }
    }
    
    .card {
      padding: 10px 12px;
      margin-bottom: 0;
    }
    
    .card-title {
      font-size: 0.9rem;
      margin-bottom: 8px;
    }
    
    /* ìˆ¨ê²¨ì§„ ë©”ì‹œì§€ (í† ìŠ¤íŠ¸ë¡œ ëŒ€ì²´) */
    #message {
      display: none !important;
    }
  </style>
</head>
<body>
  <!-- í—¤ë” -->
  <header class="header" style="padding: 8px 20px;">
    <h1 style="font-size: 1.2rem;">ğŸ® ì—°ë‚³ëŒ€ ì‹œì¦Œ6 ê²½ë§¤</h1>
    <span class="role-badge" id="teamBadge">ğŸ† íŒ€ì¥</span>
  </header>

  <div class="container">
    <!-- ìƒíƒœ ë©”ì‹œì§€ -->
    <div id="message" class="message hidden"></div>

    <!-- íŒ€ ì„ íƒ (URL íŒŒë¼ë¯¸í„° ì—†ì„ ë•Œ) -->
    <div id="teamSelect" class="card hidden">
      <h3 class="card-title">íŒ€ì„ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
      <div id="teamSelectList" class="grid grid-3"></div>
    </div>

    <div class="captain-main">
      <!-- ì™¼ìª½: ê²½ë§¤ ì„¹ì…˜ -->
      <div class="auction-section">
        <!-- ë‚´ íŒ€ ì •ë³´ -->
        <div class="my-team-card">
          <div style="text-align: center; flex: 1;">
            <div class="my-team-name" id="myTeamName">-</div>
            <div style="color: rgba(255,255,255,0.7); font-size: 0.85rem;">íŒ€ì¥: <span id="myCaptainName">-</span></div>
          </div>
          <div style="text-align: center; flex: 1;">
            <div style="color: rgba(255,255,255,0.7); font-size: 0.8rem;">ë³´ìœ  í¬ì¸íŠ¸</div>
            <div class="my-team-points"><span id="myPoints">0</span> pt</div>
          </div>
        </div>

        <!-- í˜„ì¬ ê²½ë§¤ ì„ ìˆ˜ -->
        <div class="card current-auction-card" style="flex: 1;">
          <div id="noPlayer" class="hidden">
            <p style="font-size: 1.3rem; color: #72767D;">ê²½ë§¤ ëŒ€ê¸° ì¤‘...</p>
          </div>
          <div id="playerInfo" class="player-auction-row">
            <!-- ì„ ìˆ˜ ì •ë³´ ì„¹ì…˜ -->
            <div class="player-info-section">
              <img id="playerImage" class="player-image" src="" alt="ì„ ìˆ˜ ì´ë¯¸ì§€">
              <h2 id="playerName" class="player-name">-</h2>
              <span id="playerPosition" class="player-position">-</span>
              <div id="playerTier" class="player-tier"></div>
              <div id="playerBio" class="player-bio"></div>
            </div>
            <!-- ê²½ë§¤ ì§„í–‰ ì„¹ì…˜ -->
            <div class="auction-status-section">
              <div id="timer" class="timer">--</div>
              <p id="timerStatus" style="color: #72767D; margin-top: -5px; font-size: 0.9rem;">ëŒ€ê¸° ì¤‘</p>
              <div class="current-bid"><span id="currentBid">0</span> pt</div>
              <div style="color: #72767D; font-size: 0.9rem; margin-top: 5px;">
                ìµœê³ : <span id="currentBidder" style="color: var(--secondary);">-</span>
              </div>
              <div style="color: #72767D; font-size: 0.85rem; margin-top: 3px;">
                ìµœì†Œ ì…ì°°ê°€: <span id="minBid" style="color: var(--warning);">5</span>pt
              </div>
            </div>
          </div>
        </div>

        <!-- ì…ì°° íŒ¨ë„ -->
        <div class="card bid-panel" id="bidPanel">
          <div class="bid-quick-buttons">
            <button class="btn btn-primary bid-btn" data-amount="min">ìµœì†Œ</button>
            <button class="btn btn-primary bid-btn" data-amount="+5">+5</button>
            <button class="btn btn-primary bid-btn" data-amount="+10">+10</button>
            <button class="btn btn-warning bid-btn" data-amount="+50">+50</button>
          </div>
          <div class="custom-bid">
            <input type="number" id="customBidInput" placeholder="ì§ì ‘ ì…ë ¥" min="0" step="5">
            <button class="btn btn-success" id="btnBid">ì…ì°°!</button>
          </div>
          <p id="bidError" style="color: var(--danger); margin-top: 8px; display: none; font-size: 0.85rem; text-align: center;"></p>
          <p id="maxBidInfo" style="color: #72767D; margin-top: 8px; font-size: 0.85rem; text-align: center;">ìµœëŒ€ ì…ì°° ê°€ëŠ¥: <span id="maxBidAmount">-</span>pt</p>
        </div>
        
        <!-- íŒ€ í˜„í™© (ê°€ë¡œ) - ìœ„ë¡œ ì´ë™ -->
        <div class="card">
          <h3 class="card-title">ğŸ‘¥ íŒ€ í˜„í™©</h3>
          <div id="teamsHorizontal" class="teams-horizontal"></div>
        </div>
      </div>

      <!-- ì˜¤ë¥¸ìª½: ì •ë³´ ì„¹ì…˜ -->
      <div class="info-section">
        <!-- ë‚™ì°°/ìœ ì°° ì „ì²´ ê¸°ë¡ - ë¹„ìœ¨ 1 -->
        <div class="card" style="flex: 1; display: flex; flex-direction: column; min-height: 0;">
          <h3 class="card-title">ğŸ† ë‚™ì°°/ìœ ì°° ê¸°ë¡</h3>
          <div id="recentResults" class="recent-results" style="flex: 1; overflow-y: auto;"></div>
        </div>

        <!-- ì „ì²´ íŒ€ ë¡œìŠ¤í„° - ë¹„ìœ¨ 2 -->
        <div class="card" style="flex: 2; display: flex; flex-direction: column; min-height: 0;">
          <h3 class="card-title">ğŸ“Š ì „ì²´ íŒ€ ë¡œìŠ¤í„°</h3>
          <div id="allRosters" class="all-rosters-grid" style="flex: 1; overflow-y: auto;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- í† ìŠ¤íŠ¸ ì•Œë¦¼ ì»¨í…Œì´ë„ˆ -->
  <div id="toastContainer" class="toast-container"></div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/captain.js"></script>
</body>
</html>